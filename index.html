<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>계산기 (리팩터링)</title>
  <style>
    :root{
      --bg:#000;
      --glass-bg:rgba(28,28,30,.55);
      --border:rgba(255,255,255,.15);
      --text:#f5f5f7;
      --accent:#007aff;
      --success:#30d158;
      --placeholder:#8e8e93;
      --card-w:240px;
      --card-h:150px;
      --center:320px;
    }
    *{box-sizing:border-box;-webkit-font-smoothing:antialiased}
    html,body{height:100%;margin:0;background:var(--bg);color:var(--text);display:grid;place-items:center;font-family:-apple-system,BlinkMacSystemFont,'SF Pro Display','SF Pro Text',system-ui,sans-serif}
    .board{
      display:grid;
      grid-template:
        "topL topC topR" 1fr
        "midL midC midR" var(--center)
        "botL botC botR" 1fr / 1fr var(--center) 1fr;
      gap:12px 28px;
      place-items:center;
      user-select:none;
    }
    .pos-topC{grid-area:topC}
    .pos-midL{grid-area:midL}
    .pos-midC{grid-area:midC}
    .pos-midR{grid-area:midR}
    .pos-botC{grid-area:botC}
    .box{
      width:var(--card-w);height:var(--card-h);
      display:flex;flex-direction:column;align-items:center;justify-content:center;gap:8px;
      background:var(--glass-bg);border-radius:24px;border:1px solid var(--border);
      font-size:22px;cursor:pointer;
      transition:background .25s,transform .08s,border-color .25s;
      box-shadow:0 8px 32px rgba(0,0,0,.37),inset 0 1px rgba(255,255,255,.05);
      backdrop-filter:blur(12px) saturate(180%);
      -webkit-backdrop-filter:blur(12px) saturate(180%);
    }
    .box:hover{background:rgba(44,44,46,.65);border-color:var(--accent)}
    .box:active{transform:scale(.97)}
    input[type="number"]{
      width:var(--card-w);height:var(--card-h);
      font-size:42px;text-align:center;border-radius:24px;border:1px solid var(--border);
      background:var(--glass-bg);color:var(--text);outline:none;
      box-shadow:0 8px 32px rgba(0,0,0,.37),inset 0 1px rgba(255,255,255,.05);
      backdrop-filter:blur(12px) saturate(180%);
      -webkit-backdrop-filter:blur(12px) saturate(180%);
      transition:border-color .25s,box-shadow .25s;
    }
    input[type="number"]:focus{border-color:var(--accent);box-shadow:0 0 0 3px rgba(0,122,255,.3),0 8px 32px rgba(0,0,0,.4)}
    input.default{color:var(--placeholder)}
    .formula{font-family:ui-monospace,SFMono-Regular,Menlo,Consolas,monospace;font-size:14px;color:var(--accent);opacity:.9}
    .toast{
      position:fixed;left:50%;bottom:50px;transform:translateX(-50%);
      background:rgba(48,209,88,.85);color:#000;padding:12px 24px;border-radius:40px;font-size:16px;font-weight:500;
      opacity:0;pointer-events:none;transition:opacity .3s ease-in-out;box-shadow:0 4px 10px rgba(0,0,0,.4);
    }
    .toast.show{opacity:1}
    @media (prefers-reduced-motion:reduce){
      .box, input[type="number"], .toast{transition:none}
    }
  </style>
</head>
<body>
  <div class="board" aria-label="계산기 보드">
    <div class="box pos-topC" data-target="H12" role="button" aria-label="복사: (1080 × n) ÷ 2">
      <div class="formula">(1080 × n) ÷ 2</div>
      <span id="H12">-</span>
    </div>
    <div class="box pos-midL" data-target="F15" role="button" aria-label="복사: (1920 × n) ÷ 2">
      <div class="formula">(1920 × n) ÷ 2</div>
      <span id="F15">-</span>
    </div>
    <input id="h15" class="pos-midC default" type="number" step="0.01" value="100" aria-label="배율 n(%)" />
    <div class="box pos-midR" data-target="J15" role="button" aria-label="복사: 1920 − (1920 × n) ÷ 2">
      <div class="formula">1920 − (1920 × n) ÷ 2</div>
      <span id="J15">-</span>
    </div>
    <div class="box pos-botC" data-target="H18" role="button" aria-label="복사: 1080 − (1080 × n) ÷ 2">
      <div class="formula">1080 − (1080 × n) ÷ 2</div>
      <span id="H18">-</span>
    </div>
  </div>
  <div class="toast" id="toast" role="status" aria-live="polite">복사되었습니다!</div>
  <script>
    'use strict';
    const W=1920,H=1080;
    const input=document.getElementById('h15');
    const out={F15:document.getElementById('F15'),J15:document.getElementById('J15'),H12:document.getElementById('H12'),H18:document.getElementById('H18')};
    const board=document.querySelector('.board');
    const toast=document.getElementById('toast');
    const fmt=v=>Number.isFinite(v)?String(+v.toFixed(4)):'-';
    function calc(){
      const raw=input.value;
      const n=raw===''?100:parseFloat(raw);
      const r=n/100;
      const vals={F15:(W*r)/2,J15:W-(W*r)/2,H12:(H*r)/2,H18:H-(H*r)/2};
      for(const k in vals){
        const v=fmt(vals[k]);
        if(out[k].textContent!==v)out[k].textContent=v;
      }
      input.classList.toggle('default',raw===''||parseFloat(raw)===100);
    }
    function showToast(){toast.classList.add('show');setTimeout(()=>toast.classList.remove('show'),900);}
    function fallbackCopy(text){
      const ta=document.createElement('textarea');
      ta.value=text;ta.style.position='fixed';ta.style.opacity='0';
      document.body.appendChild(ta);ta.select();
      try{document.execCommand('copy');showToast();}
      finally{ta.remove();}
    }
    board.addEventListener('click',e=>{
      const box=e.target.closest('.box');
      if(!box)return;
      const id=box.dataset.target;
      const node=out[id];
      if(!node)return;
      const val=node.textContent;
      if(val&&val!=='-'){
        if(navigator.clipboard&&navigator.clipboard.writeText){
          navigator.clipboard.writeText(val).then(showToast,()=>fallbackCopy(val));
        }else fallbackCopy(val);
      }
    },{passive:true});
    input.addEventListener('input',calc,{passive:true});
    input.addEventListener('focus',()=>input.select());
    input.addEventListener('mouseup',e=>e.preventDefault());
    input.addEventListener('touchend',()=>input.select(),{passive:true});
    calc();
  </script>
</body>
</html>
